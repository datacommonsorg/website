/**
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * A page section that defines a block of content with standard spacing,
 * widths and colors.
 */

/** @jsxImportSource @emotion/react */

import { css, Global } from "@emotion/react";
import React, { useEffect } from "react";
import Modal from "react-modal";

const customStyles = {
  content: {
    top: "50%",
    left: "50%",
    right: "auto",
    bottom: "auto",
    marginRight: "-50%",
    // transform: "translate(-50%, -50%)",
    position: "absolute",
  },
  overlay: {
    backgroundColor: "rgba(0, 0, 0, 0.5)", // 50% opacity black
  },
};

const MyModal = (props) => {
  useEffect(() => {
    Modal.setAppElement(document.body);
  }, []);

  return (
    <div>
      <Global
        styles={css`
          .ReactModal__Content {
            opacity: 0;
            transform: translateY(-30px);
            transition: opacity 400ms cubic-bezier(0, 0, 0.2, 1),
              transform 400ms cubic-bezier(0, 0, 0.2, 1);
            &.ReactModal__Content--after-open {
              opacity: 1;
              transform: translateY(0);
            }
            &.ReactModal__Content--before-close {
              opacity: 0;
              transform: translateY(-30px);
            }
          }
          .ReactModal__Overlay {
            opacity: 0;
            transition: opacity 400ms cubic-bezier(0, 0, 0.2, 1),
              transform 400ms cubic-bezier(0, 0, 0.2, 1);
            z-index: 1000;
          }
          .ReactModal__Overlay--after-open {
            opacity: 1;
          }
          .ReactModal__Overlay--before-close {
            opacity: 0;
          }
        `}
      />
      <Modal
        css={css`
          background: white;
          border: 1px solid #ccc;
          border-radius: 20px;
          padding: 20px;
          color: red;
        `}
        style={customStyles}
        closeTimeoutMS={400}
        /*
      className={{
        base: "my-modal-content",
        afterOpen: "my-modal-content--after-open",
        beforeClose: "my-modal-content--before-close",
      }}
        */
        {...props}
      >
        {props.children}x
      </Modal>
    </div>
  );
};

export default MyModal;
