/**
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * A component that renders the tools section of the home page.
 */

/** @jsxImportSource @emotion/react */

import { css, useTheme } from "@emotion/react";
import React, { ReactElement } from "react";

import { resolveHref } from "../../apps/base/utilities/utilities";
import {
  GA_EVENT_HOMEPAGE_CLICK,
  GA_PARAM_ID,
  GA_PARAM_URL,
  triggerGAEvent,
} from "../../shared/ga_events";
import { Wrapper } from "../elements/layout/wrapper";

interface ToolsProps {
  //the routes dictionary - this is used to convert routes to resolved urls
  routes: Record<string, string>;
}

const Tools = ({ routes }: ToolsProps): ReactElement => {
  const theme = useTheme();
  return (
    <Wrapper>
      <div
        css={css`
          width: 100%;
          max-width: ${theme.width.md}px;
          margin-bottom: ${theme.spacing.xl}px;
          @media (max-width: ${theme.breakpoints.md}px) {
            max-width: 100%;
          }
        `}
      >
        <h3
          css={css`
            ${theme.typography.family.heading};
            ${theme.typography.heading.md};
          `}
        >
          Data Commons tools
        </h3>
        <p
          css={css`
            ${theme.typography.family.text};
            ${theme.typography.text.lg};
          `}
        >
          Data Commons addresses offers data exploration tools and cloud-based
          APIs to access and integrate cleaned datasets.
        </p>
      </div>
      <ul
        css={css`
          display: flex;
          align-items: stretch;
          flex-wrap: wrap;
          gap: ${theme.spacing.lg}px;
          margin: 0;
          padding: 0;
          & > li {
            display: block;
            padding: 0;
            margin: 0;
            flex-basis: 200px;
            @media (max-width: ${theme.breakpoints.sm}px) {
              flex-grow: 2;
            }
          }
          & > li a {
            ${theme.box.primary}
            ${theme.elevation.primary}
            ${theme.typography.heading.xs};
            ${theme.radius.primary}
            display: flex;
            width: 100%;
            height: 100%;
            flex-direction: column;
            align-items: flex-start;
            gap: ${theme.spacing.md}px;
            padding: ${theme.spacing.lg}px;
            @media (max-width: ${theme.breakpoints.sm}px) {
              align-items: center;
            }
          }
          & > li a svg {
            display: block;
            fill: ${theme.colors.background.primary.dark};
          }
        `}
      >
        <li>
          <a
            href={resolveHref("{tools.visualization}#visType=map", routes)}
            id="map-button"
            onClick={(): void => {
              triggerGAEvent(GA_EVENT_HOMEPAGE_CLICK, {
                [GA_PARAM_ID]: "tools",
                [GA_PARAM_URL]: "map",
              });
            }}
          >
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M16.0003 29.3327C14.1559 29.3327 12.4225 28.9827 10.8003 28.2827C9.1781 27.5827 7.76699 26.6327 6.56699 25.4327C5.36699 24.2327 4.41699 22.8216 3.71699 21.1993C3.01699 19.5771 2.66699 17.8438 2.66699 15.9993C2.66699 14.1549 3.01699 12.4216 3.71699 10.7993C4.41699 9.17713 5.36699 7.76602 6.56699 6.56602C7.76699 5.36602 9.1781 4.41602 10.8003 3.71602C12.4225 3.01602 14.1559 2.66602 16.0003 2.66602C17.8448 2.66602 19.5781 3.01602 21.2003 3.71602C22.8225 4.41602 24.2337 5.36602 25.4337 6.56602C26.6337 7.76602 27.5837 9.17713 28.2837 10.7993C28.9837 12.4216 29.3337 14.1549 29.3337 15.9993C29.3337 17.8438 28.9837 19.5771 28.2837 21.1993C27.5837 22.8216 26.6337 24.2327 25.4337 25.4327C24.2337 26.6327 22.8225 27.5827 21.2003 28.2827C19.5781 28.9827 17.8448 29.3327 16.0003 29.3327ZM14.667 26.5993V23.9993C13.9337 23.9993 13.3059 23.7382 12.7837 23.216C12.2614 22.6938 12.0003 22.066 12.0003 21.3327V19.9993L5.60033 13.5993C5.53366 13.9993 5.47255 14.3993 5.41699 14.7993C5.36144 15.1993 5.33366 15.5993 5.33366 15.9993C5.33366 18.6882 6.21699 21.0438 7.98366 23.066C9.75033 25.0882 11.9781 26.266 14.667 26.5993ZM23.867 23.1993C24.3114 22.7105 24.7114 22.1827 25.067 21.616C25.4225 21.0493 25.717 20.4605 25.9503 19.8493C26.1837 19.2382 26.3614 18.6105 26.4837 17.966C26.6059 17.3216 26.667 16.666 26.667 15.9993C26.667 13.8216 26.0614 11.8327 24.8503 10.0327C23.6392 8.23268 22.0225 6.93268 20.0003 6.13268V6.66602C20.0003 7.39935 19.7392 8.02713 19.217 8.54935C18.6948 9.07157 18.067 9.33268 17.3337 9.33268H14.667V11.9993C14.667 12.3771 14.5392 12.6938 14.2837 12.9493C14.0281 13.2049 13.7114 13.3327 13.3337 13.3327H10.667V15.9993H18.667C19.0448 15.9993 19.3614 16.1271 19.617 16.3827C19.8725 16.6382 20.0003 16.9549 20.0003 17.3327V21.3327H21.3337C21.9114 21.3327 22.4337 21.5049 22.9003 21.8493C23.367 22.1938 23.6892 22.6438 23.867 23.1993Z" />
            </svg>
            Map Explorer
          </a>
        </li>
        <li>
          <a
            href={resolveHref("{tools.visualization}#visType=scatter", routes)}
            id="scatter-button"
            onClick={(): void => {
              triggerGAEvent(GA_EVENT_HOMEPAGE_CLICK, {
                [GA_PARAM_ID]: "tools",
                [GA_PARAM_URL]: "scatter",
              });
            }}
          >
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M22.6667 27.9993C21.2 27.9993 19.9444 27.4771 18.9 26.4327C17.8556 25.3882 17.3333 24.1327 17.3333 22.666C17.3333 21.1994 17.8556 19.9438 18.9 18.8993C19.9444 17.8549 21.2 17.3327 22.6667 17.3327C24.1333 17.3327 25.3889 17.8549 26.4333 18.8993C27.4778 19.9438 28 21.1994 28 22.666C28 24.1327 27.4778 25.3882 26.4333 26.4327C25.3889 27.4771 24.1333 27.9993 22.6667 27.9993ZM22.6667 25.3327C23.4 25.3327 24.0278 25.0716 24.55 24.5494C25.0722 24.0271 25.3333 23.3993 25.3333 22.666C25.3333 21.9327 25.0722 21.3049 24.55 20.7827C24.0278 20.2605 23.4 19.9993 22.6667 19.9993C21.9333 19.9993 21.3056 20.2605 20.7833 20.7827C20.2611 21.3049 20 21.9327 20 22.666C20 23.3993 20.2611 24.0271 20.7833 24.5494C21.3056 25.0716 21.9333 25.3327 22.6667 25.3327ZM9.33333 23.9993C7.86667 23.9993 6.61111 23.4771 5.56667 22.4327C4.52222 21.3882 4 20.1327 4 18.666C4 17.1993 4.52222 15.9438 5.56667 14.8993C6.61111 13.8549 7.86667 13.3327 9.33333 13.3327C10.8 13.3327 12.0556 13.8549 13.1 14.8993C14.1444 15.9438 14.6667 17.1993 14.6667 18.666C14.6667 20.1327 14.1444 21.3882 13.1 22.4327C12.0556 23.4771 10.8 23.9993 9.33333 23.9993ZM9.33333 21.3327C10.0667 21.3327 10.6944 21.0716 11.2167 20.5494C11.7389 20.0271 12 19.3993 12 18.666C12 17.9327 11.7389 17.3049 11.2167 16.7827C10.6944 16.2605 10.0667 15.9993 9.33333 15.9993C8.6 15.9993 7.97222 16.2605 7.45 16.7827C6.92778 17.3049 6.66667 17.9327 6.66667 18.666C6.66667 19.3993 6.92778 20.0271 7.45 20.5494C7.97222 21.0716 8.6 21.3327 9.33333 21.3327ZM14.6667 13.3327C13.2 13.3327 11.9444 12.8105 10.9 11.766C9.85556 10.7216 9.33333 9.46602 9.33333 7.99935C9.33333 6.53268 9.85556 5.27713 10.9 4.23268C11.9444 3.18824 13.2 2.66602 14.6667 2.66602C16.1333 2.66602 17.3889 3.18824 18.4333 4.23268C19.4778 5.27713 20 6.53268 20 7.99935C20 9.46602 19.4778 10.7216 18.4333 11.766C17.3889 12.8105 16.1333 13.3327 14.6667 13.3327ZM14.6667 10.666C15.4 10.666 16.0278 10.4049 16.55 9.88268C17.0722 9.36046 17.3333 8.73268 17.3333 7.99935C17.3333 7.26602 17.0722 6.63824 16.55 6.11602C16.0278 5.59379 15.4 5.33268 14.6667 5.33268C13.9333 5.33268 13.3056 5.59379 12.7833 6.11602C12.2611 6.63824 12 7.26602 12 7.99935C12 8.73268 12.2611 9.36046 12.7833 9.88268C13.3056 10.4049 13.9333 10.666 14.6667 10.666Z" />
            </svg>
            Scatter Plot Explorer
          </a>
        </li>
        <li>
          <a
            href={resolveHref("{tools.visualization}#visType=timeline", routes)}
            id="timeline-button"
            onClick={(): void => {
              triggerGAEvent(GA_EVENT_HOMEPAGE_CLICK, {
                [GA_PARAM_ID]: "tools",
                [GA_PARAM_URL]: "timeline",
              });
            }}
          >
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M3.99967 24C3.26634 24 2.63856 23.7389 2.11634 23.2167C1.59412 22.6944 1.33301 22.0667 1.33301 21.3333C1.33301 20.6 1.59412 19.9722 2.11634 19.45C2.63856 18.9278 3.26634 18.6667 3.99967 18.6667H4.34967C4.44967 18.6667 4.55523 18.6889 4.66634 18.7333L10.733 12.6667C10.6886 12.5556 10.6663 12.45 10.6663 12.35V12C10.6663 11.2667 10.9275 10.6389 11.4497 10.1167C11.9719 9.59444 12.5997 9.33333 13.333 9.33333C14.0663 9.33333 14.6941 9.59444 15.2163 10.1167C15.7386 10.6389 15.9997 11.2667 15.9997 12C15.9997 12.0444 15.9775 12.2667 15.933 12.6667L19.333 16.0667C19.4441 16.0222 19.5497 16 19.6497 16H20.3497C20.4497 16 20.5552 16.0222 20.6663 16.0667L25.3997 11.3333C25.3552 11.2222 25.333 11.1167 25.333 11.0167V10.6667C25.333 9.93333 25.5941 9.30556 26.1163 8.78333C26.6386 8.26111 27.2663 8 27.9997 8C28.733 8 29.3608 8.26111 29.883 8.78333C30.4052 9.30556 30.6663 9.93333 30.6663 10.6667C30.6663 11.4 30.4052 12.0278 29.883 12.55C29.3608 13.0722 28.733 13.3333 27.9997 13.3333H27.6497C27.5497 13.3333 27.4441 13.3111 27.333 13.2667L22.5997 18C22.6441 18.1111 22.6663 18.2167 22.6663 18.3167V18.6667C22.6663 19.4 22.4052 20.0278 21.883 20.55C21.3608 21.0722 20.733 21.3333 19.9997 21.3333C19.2663 21.3333 18.6386 21.0722 18.1163 20.55C17.5941 20.0278 17.333 19.4 17.333 18.6667V18.3167C17.333 18.2167 17.3552 18.1111 17.3997 18L13.9997 14.6C13.8886 14.6444 13.783 14.6667 13.683 14.6667H13.333C13.2886 14.6667 13.0663 14.6444 12.6663 14.6L6.59967 20.6667C6.64412 20.7778 6.66634 20.8833 6.66634 20.9833V21.3333C6.66634 22.0667 6.40523 22.6944 5.88301 23.2167C5.36079 23.7389 4.73301 24 3.99967 24Z" />
            </svg>
            Timelines Explorer
          </a>
        </li>
        <li>
          <a
            href={resolveHref("{tools.download}", routes)}
            id="download-button"
            onClick={(): void => {
              triggerGAEvent(GA_EVENT_HOMEPAGE_CLICK, {
                [GA_PARAM_ID]: "tools",
                [GA_PARAM_URL]: "download",
              });
            }}
          >
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M15.9997 21.334L9.33301 14.6673L11.1997 12.734L14.6663 16.2007V5.33398H17.333V16.2007L20.7997 12.734L22.6663 14.6673L15.9997 21.334ZM7.99967 26.6673C7.26634 26.6673 6.63856 26.4062 6.11634 25.884C5.59412 25.3618 5.33301 24.734 5.33301 24.0007V20.0007H7.99967V24.0007H23.9997V20.0007H26.6663V24.0007C26.6663 24.734 26.4052 25.3618 25.883 25.884C25.3608 26.4062 24.733 26.6673 23.9997 26.6673H7.99967Z" />
            </svg>
            Data Download Tool
          </a>
        </li>
        <li>
          <a
            href="https://docs.datacommons.org/api/"
            id="api-button"
            onClick={(): void => {
              triggerGAEvent(GA_EVENT_HOMEPAGE_CLICK, {
                [GA_PARAM_ID]: "tools",
                [GA_PARAM_URL]: "api",
              });
            }}
          >
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M12.8 20.8006L14.6667 18.8673L11.8 16.0007L14.6667 13.134L12.8 11.2007L8 16.0007L12.8 20.8006ZM19.2 20.8006L24 16.0007L19.2 11.2007L17.3333 13.134L20.2 16.0007L17.3333 18.8673L19.2 20.8006ZM6.66667 28.0006C5.93333 28.0006 5.30556 27.7395 4.78333 27.2173C4.26111 26.6951 4 26.0673 4 25.334V6.66732C4 5.93398 4.26111 5.30621 4.78333 4.78398C5.30556 4.26176 5.93333 4.00065 6.66667 4.00065H12.2667C12.5556 3.20065 13.0389 2.55621 13.7167 2.06732C14.3944 1.57843 15.1556 1.33398 16 1.33398C16.8444 1.33398 17.6056 1.57843 18.2833 2.06732C18.9611 2.55621 19.4444 3.20065 19.7333 4.00065H25.3333C26.0667 4.00065 26.6944 4.26176 27.2167 4.78398C27.7389 5.30621 28 5.93398 28 6.66732V25.334C28 26.0673 27.7389 26.6951 27.2167 27.2173C26.6944 27.7395 26.0667 28.0006 25.3333 28.0006H6.66667ZM6.66667 25.334H25.3333V6.66732H6.66667V25.334ZM16 5.66732C16.2889 5.66732 16.5278 5.57287 16.7167 5.38398C16.9056 5.1951 17 4.95621 17 4.66732C17 4.37843 16.9056 4.13954 16.7167 3.95065C16.5278 3.76176 16.2889 3.66732 16 3.66732C15.7111 3.66732 15.4722 3.76176 15.2833 3.95065C15.0944 4.13954 15 4.37843 15 4.66732C15 4.95621 15.0944 5.1951 15.2833 5.38398C15.4722 5.57287 15.7111 5.66732 16 5.66732Z" />
            </svg>
            API Access
          </a>
        </li>
      </ul>
    </Wrapper>
  );
};

export default Tools;
