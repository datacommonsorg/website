<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="https://datacommons.org/css/datacommons.min.css"
    />
    <script src="https://datacommons.org/datacommons.js"></script>
  </head>
  <body>
    <div style="margin: auto; width: 80%;">
      <h1>OEmbed for Data Commons Web Components</h1>
      The Data Commons OEmbed API allows for users to embed web components on
      their webpages using oembed-compatible content management services
      (Drupal/Wordpress/Etc).
      <br /><br />
      For example, for a web component like:
      <datacommons-bar
        places="geoId/06 geoId/08 geoId/48"
        variables="Count_Person"
        title="Count of People in CA, TX, and CO"
      ></datacommons-bar>
      <br />
      With source code:
      <br />
      <pre>
      &lt;datacommons-bar
        places="geoId/06 geoId/08 geoId/48"
        variables="Count_Person"
        title="Count of People in CA, TX, and CO"
      &gt;&lt;/datacommons-bar&gt;
      </pre>
      <br />
      This component corresponds with a URI, which takes you to a page just
      containing the chart.
      <br /><br />
      <a href="https://datacommons.org/chart/?chartType=bar&places=geoId/06&places=geoId/08&places=geoId/48&variables=Count_Person&title=Count%20People">https://datacommons.org/chart/?chartType=bar&places=geoId/06&places=geoId/08&places=geoId/48&variables=Count_Person&title=Count%20People</a>
      <br /><br />
      In an oembed-compatible content management tool, pasting that link will 
      generate an embeddable object containing the chart
      <object
        width="500"
        height="400"
        data="https://datacommons.org/chart/?chartType=bar&places=geoId/06&places=geoId/08&places=geoId/48&variables=Count_Person&title=Count%20People">
      </object>
      <br />With source code:
      <pre>
      &lt;object
        width="500"
        height="400"
        data="https://datacommons.org/chart/?chartType=bar&places=geoId/06&places=geoId/08&places=geoId/48&variables=Count_Person&title=Count%20People"&gt;
      &lt;/object&gt;
      </pre>
      <br />
      Behind the scenes, this object is generated by passing the component's URI
      into our new oembed endpoint.
      <br/><br />
      So this request:
      <a href="https://datacommons.org/oembed?url=https://datacommons.org/chart/?chartType=bar%26places=geoId/06%26places=geoId/08%26places=geoId/48%26variables=Count_Person%26title=Count%20People">https://datacommons.org/oembed?url=https://datacommons.org/chart/?chartType=bar%26places=geoId/06%26places=geoId/08%26places=geoId/48%26variables=Count_Person%26title=Count%20People</a>
      <br/>
      Gives this response:
      <pre>
        <code>
      {
        "type": "rich",
        "version": "1.0",
        "provider_name": "Data Commons",
        "provider_url": "https://datacommons.org",
        "width": 500,
        "height": 400,
        "html": "&lt;object width=\"500\" height=\"400\" data=\"https://datacommons.org/chart/?chartType=bar&places=geoId/06&places=geoId/08&places=geoId/48&variables=Count_Person&title=Count People\"&gt;&lt;/object&gt;"
      }
        </code>
      </pre>
    </div>

  </body>
</html>